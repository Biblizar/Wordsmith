{% extends 'base.html.twig' %}

{% block title %}Mon profil{% endblock %}

{% block main %}
<div class="wrapper-homepage">
    <div class="container container-width">
        <h1>Bienvenue <em>{{ app.user.username }}</em></h1>
        <div class="container-profil">
            <div class="left-side">
                <img src="{{user.characterProfile.avatar}}">
                <a class="btn" href="{{ user.characterProfile.link1}}">Fiche de présentation</a> 
                <a class="btn" href="{{ user.characterProfile.link2}}">Liens</a>
            </div>
            <div class="right-side">
                <div id="tabs">
                    <ul class="tabs-header">
                        <li><a href="#tabs-1">Profil</a></li>
                        <li><a href="#tabs-2">Mes sujets</a></li>
                        <li><a href="#tabs-3">Mes rooms</a></li>
                    </ul>
                    <div id="tabs-1">
                    <div class="profile-title">
                        <h2>Informations générales</h2> 
                        <a class="btn btn-edit" href="{{path('user_profile_edit', {'id': app.user.id })}}">Modifier</a>
                    </div>
                    <ul>
                        <li>
                            <span class="profile-label">Nom d'utilisateur :</span> {{ user.username }}
                        </li>
                        <li>
                            <span class="profile-label">Email :</span> {{ user.email}}
                        </li>
                        <li>
                            <span class="profile-label">Date de naissance :</span> {{ user.birthdate|date("d-m-Y")}}
                        </li>
                    </ul>
                    <div class="profile-title">
                        <h2>Profil du personnage </h2> 
                        <a class="btn btn-edit" href="{{path('characterprofile_edit', {'id': app.user.characterProfile.id })}}">Modifier</a>
                    </div>
                    <ul>
                        <li>
                            <span class="profile-label">Age :</span> {{ user.characterProfile.age}}
                        </li>
                        <li>
                            <span class="profile-label">Race :</span> {{ user.characterProfile.race}}
                        </li>
                        <li>
                            <span class="profile-label">Classe :</span> {{ user.characterProfile.class}}
                        </li>
                        <li>
                            <span class="profile-label">Caste sociale :</span> {{ user.characterProfile.socialCast}}
                        </li>
                        <li>
                            <span class="profile-label">Localisation :</span> {{ user.characterProfile.localisation}}
                        </li>
                        <li>
                            <span class="profile-label">Faits divers :</span> {{ user.characterProfile.miscellaneous}}
                        </li>
                    </ul>
                     
                    
                    </div>
                    <div id="tabs-2">
                        <div class="profile-title">
                            <h2>Mes sujets</h2> 
                        </div>
                        <ul>
                        {% for thread in user.threads %}
                            <li>{{ thread.title}}</li>
                        {% endfor %}
                        </ul>
                        <div class="profile-title">
                            <h2>Mes réponses</h2> 
                        </div>
                         <ul>
                        {% for post in user.posts %}
                            <li>{{ post.thread.title}}</li>
                        {% endfor %}
                        </ul>
                    </div>
                    <div id="tabs-3">
                       <div class="profile-title">
                            <h2>J'ai créé les parties</h2>
                        </div>
                        {% for room in rooms %}
                        {% if room.dungeonmaster.username == user.username %}
                        <div class="room-content">
                            <h3>{{ room.name }}</h3> 
                            <div class="room-content-btn">
                                <a class="btn" href="{{ path('room_edit', {'id': room.id}) }}">
                                    <i class="far fa-edit"></i>
                                </a>                                
                                <a target="_blank" class="btn" href="{{ path('room_show', {'code': room.code}) }}">
                                    <i class="fas fa-arrow-right"></i></button>
                                </a>
                            </div>
                        </div>
                        {% endif %}
                        {% endfor %}
                        <div class="profile-title">
                            <h2>J'ai rejoint les parties</h2>
                        
                        </div>
                        {% for room in rooms %}
                        {% for participant in room.participants %}
                        {% if participant.username == user.username %}
                            <div class="room-content">
                                <h3>{{ room.name }}</h3>
                                <div class="room-content-btn">
                                    <a target="_blank" class="btn" href="{{ path('room_show', {'code': room.code}) }}">
                                        <i class="fas fa-arrow-right"></i></button>
                                    </a>
                                </div>
                            </div>
                        {% endif %}    
                        {% endfor %}
                        {% endfor %}
                    </div>
                </div>
            </div>                            
        </div>
    </div>
 </div>
{% endblock %}

{% block javascripts %}
{{parent()}}
<script>
  $( function() {
    $( "#tabs" ).tabs();
  } );
  </script>
{% endblock %}